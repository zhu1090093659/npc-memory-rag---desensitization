## Example environment file for local development
## Copy this file to `.env` and fill in the values.
## Note: `.env` is gitignored.

# -----------------------------
# Core / Async indexing
# -----------------------------
INDEX_ASYNC_ENABLED=true
REQUEST_TIMEOUT_SECONDS=55
REPLY_TTL_SECONDS=60

REDIS_URL=redis://localhost:6379/0
CACHE_TTL_SECONDS=300

# -----------------------------
# Pub/Sub
# -----------------------------
PUBSUB_PROJECT_ID=your-project-id
PUBSUB_TOPIC=index-tasks-v2
PUBSUB_PRODUCER=npc-memory-api

# -----------------------------
# Elasticsearch
# -----------------------------
ES_URL=http://localhost:9200
ES_API_KEY=
INDEX_ALIAS=npc_memories

# -----------------------------
# Embedding
# -----------------------------
INDEX_VECTOR_DIMS=4096
EMBEDDING_PROVIDER=openai_compatible
EMBEDDING_BASE_URL=https://api.bltcy.ai/v1
EMBEDDING_MODEL=qwen3-embedding-8b

MODELSCOPE_BASE_URL=https://api.bltcy.ai/v1
MODELSCOPE_API_KEY=
EMBEDDING_API_KEY=

EMBEDDING_ALLOW_STUB=false
EMBEDDING_CACHE_ENABLED=false
EMBEDDING_TIMEOUT=30
EMBEDDING_MAX_RETRIES=3

# -----------------------------
# Rerank (optional, lightweight)
# -----------------------------
RERANK_ENABLED=false
# Reuse the same OpenAI-compatible gateway as embedding (EMBEDDING_BASE_URL / EMBEDDING_API_KEY)
RERANK_MODEL=
RERANK_CANDIDATE_LIMIT=20
RERANK_CONTENT_MAX_CHARS=240
RERANK_TIMEOUT_SECONDS=10

# -----------------------------
# Worker
# -----------------------------
MAX_INFLIGHT_TASKS=4

# -----------------------------
# Optional tuning
# -----------------------------
ES_ROUTING_ENABLED=false
SEARCH_THREAD_POOL_SIZE=16
METRICS_PORT=8000

# -----------------------------
# Benchmark (examples/benchmark.py)
# -----------------------------
BENCH_API_BASE_URL=https://npc-memory-api-xxxx.asia-southeast1.run.app
BENCH_TIMEOUT_SECONDS=120
BENCH_PLAYER_ID=player_1
BENCH_NPC_ID=npc_blacksmith
BENCH_SEED_ENABLED=true
BENCH_SEED_COUNT=10
BENCH_SEARCH_ITERATIONS=10
BENCH_WRITE_ITERATIONS=5
BENCH_WARMUP=1
BENCH_CONCURRENCY_LIST=2,4
BENCH_TOTAL_REQUESTS=10
BENCH_VERBOSE_ERRORS=false
BENCH_HTTP_MAX_RETRIES=2


